"use strict";(self.webpackChunk_stagehand_docs=self.webpackChunk_stagehand_docs||[]).push([[332],{1184:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>d});var s=i(6540);const t={},r=s.createContext(t);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:n},e.children)}},6912:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>l,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"api/invitations","title":"API Reference: Invitations","description":"This document provides a detailed breakdown of the invitation-related API endpoints.","source":"@site/docs/api/invitations.md","sourceDirName":"api","slug":"/api/invitations","permalink":"/api/invitations","draft":false,"unlisted":false,"editUrl":"https://github.com/your-org/stagehand/tree/main/packages/docs/docs/api/invitations.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"API Reference: Memberships","permalink":"/api/memberships"},"next":{"title":"API Reference: SCM Integrations","permalink":"/api/integrations"}}');var t=i(4848),r=i(1184);const o={},d="API Reference: Invitations",c={},a=[{value:"Overview",id:"overview",level:2},{value:"Endpoints",id:"endpoints",level:2},{value:"<code>POST /resend</code>",id:"post-resend",level:3}];function h(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"api-reference-invitations",children:"API Reference: Invitations"})}),"\n",(0,t.jsx)(n.p,{children:"This document provides a detailed breakdown of the invitation-related API endpoints."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"File:"})," ",(0,t.jsx)(n.code,{children:"packages/api/src/routes/invitations.js"}),"\n",(0,t.jsx)(n.strong,{children:"Base Path:"})," ",(0,t.jsx)(n.code,{children:"/api/v1/invitations"})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["Manages the process of re-inviting users who have been added to a resource but have not yet registered and activated their account. The initial creation of an invitation is handled by the ",(0,t.jsx)(n.code,{children:"POST /api/v1/memberships"})," endpoint."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Middleware:"})," All routes in this file are protected by the ",(0,t.jsx)(n.code,{children:"protect"})," middleware."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,t.jsx)(n.h3,{id:"post-resend",children:(0,t.jsx)(n.code,{children:"POST /resend"})}),"\n",(0,t.jsx)(n.p,{children:"Resends an invitation email to a pending user."}),"\n",(0,t.jsx)(n.p,{children:'A "pending" user is one who has been created in the system (e.g., by being added as a member to a project) but has not yet clicked the invitation link to set their password and activate their account.'}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Permissions:"})," Requires the requesting user to have ",(0,t.jsx)(n.code,{children:"ADMIN"})," or ",(0,t.jsx)(n.code,{children:"EDITOR"})," permissions on the resource to which the pending user was originally invited."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Body (",(0,t.jsx)(n.code,{children:"application/json"}),"):"]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"userId"})," (string, required): The ID of the pending user to whom the invitation should be resent."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Success Response (",(0,t.jsx)(n.code,{children:"200"}),"):"]})," ",(0,t.jsx)(n.code,{children:'{ "message": "Invitation sent successfully" }'})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Error Response (",(0,t.jsx)(n.code,{children:"400"}),"):"]})," If the target user has already registered and verified their account."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Error Response (",(0,t.jsx)(n.code,{children:"404"}),"):"]})," If a pending user or their associated invitation is not found."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Finds the user by the provided ",(0,t.jsx)(n.code,{children:"userId"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Verifies the user is in a pending state (i.e., they have not yet verified their email)."}),"\n",(0,t.jsx)(n.li,{children:"Finds the original membership record to determine which resource they were invited to."}),"\n",(0,t.jsxs)(n.li,{children:["Checks if the ",(0,t.jsx)(n.em,{children:"requesting user"})," has permission to manage members for that resource."]}),"\n",(0,t.jsx)(n.li,{children:"Deletes the old invitation record."}),"\n",(0,t.jsx)(n.li,{children:"Generates a new, secure invitation token with a 24-hour expiry."}),"\n",(0,t.jsxs)(n.li,{children:["Creates a new ",(0,t.jsx)(n.code,{children:"Invitation"})," record in the database."]}),"\n",(0,t.jsx)(n.li,{children:"Emails a new invitation link to the pending user."}),"\n"]}),"\n"]}),"\n"]})]})}function l(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}}}]);