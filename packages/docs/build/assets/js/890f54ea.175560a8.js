"use strict";(self.webpackChunk_stagehand_docs=self.webpackChunk_stagehand_docs||[]).push([[37],{1184:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>d});var r=i(6540);const s={},o=r.createContext(s);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(o.Provider,{value:n},e.children)}},8817:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"api/oidc","title":"API Reference: OIDC Configuration","description":"This document provides a detailed breakdown of the OIDC configuration-related API endpoints.","source":"@site/docs/api/oidc.md","sourceDirName":"api","slug":"/api/oidc","permalink":"/api/oidc","draft":false,"unlisted":false,"editUrl":"https://github.com/your-org/stagehand/tree/main/packages/docs/docs/api/oidc.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"API Reference: Authentication","permalink":"/api/auth"},"next":{"title":"API Reference: Organizations","permalink":"/api/organizations"}}');var s=i(4848),o=i(1184);const t={},d="API Reference: OIDC Configuration",c={},l=[{value:"Overview",id:"overview",level:2},{value:"Security",id:"security",level:2},{value:"Endpoints",id:"endpoints",level:2},{value:"<code>GET /</code>",id:"get-",level:3},{value:"<code>POST /</code>",id:"post-",level:3},{value:"<code>PUT /</code>",id:"put-",level:3},{value:"<code>DELETE /</code>",id:"delete-",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"api-reference-oidc-configuration",children:"API Reference: OIDC Configuration"})}),"\n",(0,s.jsx)(n.p,{children:"This document provides a detailed breakdown of the OIDC configuration-related API endpoints."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File:"})," ",(0,s.jsx)(n.code,{children:"packages/api/src/routes/oidc.js"}),"\n",(0,s.jsx)(n.strong,{children:"Base Path:"})," ",(0,s.jsx)(n.code,{children:"/api/v1/organizations/:orgId/oidc"})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"Provides full CRUD (Create, Read, Update, Delete) functionality for managing an organization's OIDC single sign-on (SSO) configuration. This allows an organization to delegate its user authentication to an external Identity Provider (e.g., Okta, Auth0)."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note on Routing:"})," The routes in this file are registered at the root level but are defined relative to an organization. The full path is, for example, ",(0,s.jsx)(n.code,{children:"/api/v1/organizations/:orgId/oidc"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Middleware:"})," All routes in this file are protected by the ",(0,s.jsx)(n.code,{children:"protect"})," middleware."]}),"\n",(0,s.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Permissions:"})," All endpoints require the authenticated user to have an ",(0,s.jsx)(n.code,{children:"ADMIN"})," role on the target organization."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Client Secret:"})," The ",(0,s.jsx)(n.code,{children:"clientSecret"})," is a sensitive credential. It is encrypted before being stored in the database and is ",(0,s.jsx)(n.strong,{children:"never"})," sent back to the client in API responses."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,s.jsx)(n.h3,{id:"get-",children:(0,s.jsx)(n.code,{children:"GET /"})}),"\n",(0,s.jsx)(n.p,{children:"Retrieves the current OIDC configuration for an organization."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"URL:"})," ",(0,s.jsx)(n.code,{children:"/api/v1/organizations/:orgId/oidc"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Success Response (",(0,s.jsx)(n.code,{children:"200"}),"):"]})," The ",(0,s.jsx)(n.code,{children:"OIDCConfiguration"})," object, with the ",(0,s.jsx)(n.code,{children:"clientSecret"})," field removed."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Error Response (",(0,s.jsx)(n.code,{children:"404"}),"):"]})," If no OIDC configuration exists for the organization."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"post-",children:(0,s.jsx)(n.code,{children:"POST /"})}),"\n",(0,s.jsx)(n.p,{children:"Creates a new OIDC configuration for an organization."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"URL:"})," ",(0,s.jsx)(n.code,{children:"/api/v1/organizations/:orgId/oidc"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Body (",(0,s.jsx)(n.code,{children:"application/json"}),"):"]})," Requires all the necessary OIDC provider details.","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"isEnabled"})," (boolean, optional)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"issuer"})," (string, required)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"clientId"})," (string, required)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"clientSecret"})," (string, required): This value is immediately encrypted."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"authorizationUrl"})," (string, required)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"tokenUrl"})," (string, required)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"userInfoUrl"})," (string, required)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"defaultRole"})," (enum, optional): The role assigned to new users signing up via OIDC (e.g., ",(0,s.jsx)(n.code,{children:"'READER'"}),"). Defaults to the Prisma schema default."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"buttonText"})," (string, optional): Custom text for the SSO login button."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Success Response (",(0,s.jsx)(n.code,{children:"201"}),"):"]})," The newly created ",(0,s.jsx)(n.code,{children:"OIDCConfiguration"})," object, with the ",(0,s.jsx)(n.code,{children:"clientSecret"})," field removed."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Error Response (",(0,s.jsx)(n.code,{children:"409"}),"):"]})," If a configuration already exists for this organization."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"put-",children:(0,s.jsx)(n.code,{children:"PUT /"})}),"\n",(0,s.jsx)(n.p,{children:"Updates an existing OIDC configuration for an organization."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"URL:"})," ",(0,s.jsx)(n.code,{children:"/api/v1/organizations/:orgId/oidc"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Body (",(0,s.jsx)(n.code,{children:"application/json"}),"):"]})," Include any of the fields from the ",(0,s.jsx)(n.code,{children:"POST"})," request that you wish to update. Only the provided fields will be modified."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Success Response (",(0,s.jsx)(n.code,{children:"200"}),"):"]})," The updated ",(0,s.jsx)(n.code,{children:"OIDCConfiguration"})," object, with the ",(0,s.jsx)(n.code,{children:"clientSecret"})," field removed."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"delete-",children:(0,s.jsx)(n.code,{children:"DELETE /"})}),"\n",(0,s.jsx)(n.p,{children:"Deletes the OIDC configuration for an organization."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"URL:"})," ",(0,s.jsx)(n.code,{children:"/api/v1/organizations/:orgId/oidc"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Success Response (",(0,s.jsx)(n.code,{children:"204"}),"):"]})," No content."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);